{% extends 'forum/base.html' %}

{% block title %}{{ category.name }} - VeggieVibesNI{% endblock %}

{% block content %}
<div style="margin-bottom: 2rem;">
    <h2 style="color: #2d5016; margin-bottom: 0.5rem;">{{ category.name }}</h2>
    <p style="color: #666; margin-bottom: 1.5rem;">{{ category.description }}</p>
    
    {% if user.is_authenticated %}
        <a href="{% url 'create_post' category.slug %}" class="btn">Create New Post</a>
    {% else %}
        <p style="color: #666;"><a href="/admin/login/">Login</a> to create a post</p>
    {% endif %}
</div>

<div>
    <h3 style="margin-bottom: 1rem;">Posts</h3>
    {% if posts %}
        <div style="background: white; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
            {% for post in posts %}
                <div style="padding: 1.5rem; border-bottom: 1px solid #eee;">
                    {% if post.is_pinned %}
                        <span style="background: #ffc107; color: #333; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.8rem; font-weight: bold; margin-right: 0.5rem;">PINNED</span>
                    {% endif %}
                    <h4 style="margin-bottom: 0.5rem;">
                        <a href="{% url 'post_detail' post.id %}" style="color: #2d5016; text-decoration: none; font-size: 1.2rem;">
                            {{ post.title }}
                        </a>
                    </h4>
                    <p style="color: #666; margin-bottom: 0.75rem;">{{ post.content|truncatewords:30 }}</p>
                    <p style="font-size: 0.9rem; color: #999;">
                        by {{ post.author.username }} • {{ post.created_at|timesince }} ago • 
                        {{ post.views }} views • {{ post.get_reply_count }} replies
                    </p>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p style="background: white; padding: 2rem; border-radius: 8px; text-align: center; color: #666;">
            No posts in this category yet. Be the first to post!
        </p>
    {% endif %}
</div>
{% endblock %}
